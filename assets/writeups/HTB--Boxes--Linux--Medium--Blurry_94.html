<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Blurry</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="../../assets/css/writeups_style.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Blurry</h1><br/><p><ol><li>Realizo un escaneo de puertos</li><li>Encuentro abiertos el puerto 80 (http) y el 21 (ssh)</li><li>Al realizar el escaneo el puerto 80 me redirije a un subdominio</li><li>Los añado a hosts </li></ol><img src="images/94-1.png" alt="images/94-1.png" /><ol><li>Rebuscando encuentro una app para crear credenciales nuevas   </li><li>Cuando envio cualquier nombre entro como developer</li><li>Necesito configurar clearml usando esto para crear las credenciales </li></ol><img src="images/94-2.png" alt="images/94-2.png" /><ol><li>Tengo que instalar clearml. ClearML es una app para crear modelos de IA.</li><li>Al iniciar clearml metemos la configuración que nos dan</li><li>Tuve un problema por que no añadi estos subdominios </li></ol><img src="images/94-3.png" alt="images/94-3.png" /><ol><li>Buscando vulns encuentro este   <strong>CVE-2024–24590: Pickle Load on Artifact Get</strong></li><li>Este CVE permite crear un Pickle file que contiene el shell, subirlo al proyecto. Cuando alguien descargue nuestro shell se ejecutará</li><li>Ahora tenemos que saber como el admin ejecutará el artefacto</li><li>Esto nos da info muy relevante </li></ol><img src="images/94-4.png" alt="images/94-4.png" /><ol><li>Esto nos puede ayudar a crear el reverse  <a href="https://hiddenlayer.com/research/not-so-clear-how-mlops-solutions-can-muddy-the-waters-of-your-supply-chain/?source=post_page-----b44bc2c1aea0--------------------------------">https://hiddenlayer.com/research/not-so-clear-how-mlops-solutions-can-muddy-the-waters-of-your-supply-chain/?source=post_page-----b44bc2c1aea0--------------------------------</a></li><li>Ejecuto el exploit y consigo una reverse como usuario </li></ol><img src="images/94-5.png" alt="images/94-5.png" /><ol><li>Para escalar privilegios ejecuto sudo -l para ver que comandos puedo ejecutar como administrador </li></ol><img src="images/94-6.png" alt="images/94-6.png" /><ol><li>Esta script busca archivos que acaban en .pth dentro de la carpeta models quita el codigo malicioso y lo ejecuta.</li><li>Tenemos permiso de escritura en la carpeta models </li></ol><img src="images/94-7.png" alt="images/94-7.png" /><ol><li>Necesito instalar torch para crear el modelo</li><li>Una vez instalado creo el modelo malicioso</li><li>Y lo subo a mi target  </li></ol><img src="images/94-8.png" alt="images/94-8.png" /><ol><li>Ejecuto el comando sudo </li></ol><img src="images/94-9.png" alt="images/94-9.png" /><ol><li>Y obtengo el reverse como root</p><p></li></ol><img src="images/94-10.png" alt="images/94-10.png" /></p></div>
</body>
</html>
