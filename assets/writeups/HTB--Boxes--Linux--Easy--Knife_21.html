<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Knife</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="../../assets/css/writeups_style.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Knife</h1><br/><p><ol><li>Realizo un escaneo de puertos</li><li>Encuentro el servicio ssh y el ftp</li><li>Como SSH es un servicio muy seguro voy a intentar atacar el servicio http</li><li>Añado la dirección ip a mi lista de hosts</li><li>Miro el código de la página web pero no encuentro nada interesante</li><li>Intercepto el tráfico con burpsuite para ver que me devuelve el GET de la página</li><li>También lo puedo hacer con curl</br> <strong>curl -X OPTIONS http://10.10.10.242 -i</strong></li><li>Encuentro la versión PHP/8.1.0-dev</li><li>Busco exploits</li><li>Con searchsploit encuentro un RCE</li></ol></p><p>  <img src="images/21-1.png" alt="images/21-1.png" /><ol><li>Copio el exploit a mi directorio</li></ol></p><p>  <img src="images/21-2.png" alt="images/21-2.png" /><ol><li>Ejecuto el exploit para entrar por la backdoor</li><li>Soy el usuario james</li></ol></p><p>  <img src="images/21-3.png" alt="images/21-3.png" /><ol><li>Parece que no me puedo mover entre carpetas por lo que pillo la flag por comando </br><strong>cat /home/james/user.txt</strong></li><li>Hago un <strong>sudo -l</strong> para ver que puedo ejecutar como administrador</li><li>Encuentro que el comando  knife lo puedo usarlo para ejecutar como root un comando sin password</li><li>Al no poder spawnear una session tty tengo que ejecutar un revshell de php</li></ol></p><p>  <img src="images/21-4.png" alt="images/21-4.png" /><ol><li>Uso knife para ver el root.txt</br><strong> sudo knife exec -E &#39;system(&quot;cat /root/root.txt&quot;)&#39;</strong></li></ol></p><p align="center"></p></div>
</body>
</html>
