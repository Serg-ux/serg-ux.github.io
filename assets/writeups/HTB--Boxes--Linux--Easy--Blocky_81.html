<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Blocky</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Blocky</h1><br/><p><ol><li>Realizo un escaneo de puertos <strong>nmap 10.10.10.37 -Pn -sC -sV -p- --open -T4</strong></li><li>Encuentro los servicios ftp, ssh y http</li><li>Añado la dirección ip a /etc/hosts/</li><li>Hago un whatweb para ver si encuentro algo interesante</li><li>Veo que usa apache y wordpress </li></ol><img src="images/81-1.png" alt="images/81-1.png" /><ol><li></li></ol><img src="images/81-2.png" alt="images/81-2.png" /><ol><li>Hago una enumeración de directorios para ver si encuentro algún login para bypasssear</li><li>Encuentro estas rutas </li></ol><img src="images/81-3.png" alt="images/81-3.png" /><ol><li>Tras ver en varias rutas me da esta pista </li></ol><img src="images/81-4.png" alt="images/81-4.png" /><ol><li>Encuentro los login de <strong>phpMyAdmin</strong> y <strong>wordpress</strong> pero no tengo ningún credencial </li></ol><img src="images/81-5.png" alt="images/81-5.png" /><ol><li></li></ol><img src="images/81-6.png" alt="images/81-6.png" /><ol><li>En la ruta <strong>blocky.htb/plugins/</strong> encuentro 2 archivos que creo que se están usando para almacenar datos de la db.</li><li>con jd-gui descompilamos el archivo .jar y encontramos el usuario y la contraseña </li></ol><img src="images/81-7.png" alt="images/81-7.png" /><ol><li>Las introducimos en phpMyadmin y conseguimos acceder al dashboard </li></ol><img src="images/81-8.png" alt="images/81-8.png" /><ol><li>Con wpscan encontramos directorios que son vectores de ataque </li></ol><img src="images/81-9.png" alt="images/81-9.png" /><ol><li></li></ol><img src="images/81-10.png" alt="images/81-10.png" /><ol><li>Dentro del panel de phpMyAdmin encuentro el usuario Notch con su contraseña </li></ol><img src="images/81-11.png" alt="images/81-11.png" /><ol><li>cambiamos la pass y entramos en wp </li></ol><img src="images/81-12.png" alt="images/81-12.png" /><ol><li></li></ol><img src="images/81-13.png" alt="images/81-13.png" /><ol><li>Al ejectuar wpscan nos dio como posible vector el theme TwentySeventeen</li><li>Vemos que el tema está en php por lo que usaré el php-reverse-shell de pentestmonkey</li><li>Ejecutamos el archivo para inicializar el reverse </li></ol><img src="images/81-14.png" alt="images/81-14.png" /><ol><li>Obtenemos el reverse shell y obtenemos la flag del user </li></ol><img src="images/81-15.png" alt="images/81-15.png" /><ol><li>No podemos cambiarnos al usuario notch por que no tenemos una terminal</li><li>Para iniciar sesión a través de ssh tenemos que hacerlo con la otra pass de root que obtuvimos en el .jar </li></ol><img src="images/81-16.png" alt="images/81-16.png" /><ol><li>Para escalar privilegios lo primero que hago es ver que comandos puedo ejecutar como administrador con <strong>sudo -l</strong> </li></ol><img src="images/81-17.png" alt="images/81-17.png" /><ol><li>Veo que puedo ejecutar todos los comandos sin pass por lo que hago sudo su y consigo la flag de root </li></ol><img src="images/81-18.png" alt="images/81-18.png" /></p></div>
</body>
</html>
