<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Greenhorn</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="../../assets/css/writeups_style.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Greenhorn</h1><br/><p>Añadimos la dirección IP a nuestra lista /etc/hosts</p><p></p><p>Echo una vista por encima a la página</p><p></p><p>Encuentro un admin login</p><p><img src="images/120-1.png" alt="images/120-1.png" /></p><p>No consigo bypassearlo de primeras</p><p></p><p>Mientras realizo un escaneo de puertos</p><p></p><p>Encuentro que esta el puerto 22, 80 y 3000</p><p><img src="images/120-2.png" alt="images/120-2.png" /></p><p>Accedo al puerto 3000 y realizo un escaneo de directorios con gobuster</p><p></p><p>Encuentro información la cual me permiete encontrar un hash almacenado</p><p><img src="images/120-3.png" alt="images/120-3.png" /></p><p></p><p>&lt;?php</p><p>$ww = &#39;d5443aef1b64544f3685bf112f6c405218c573c7279a831b1fe9612e3a4d770486743c5580556c0d838b51749de15530f87fb793afdcc689b6b39024d7790163&#39;;</p><p>?&gt;</p><p></p><p>Lo desencrypto con John the Ripper</p><p></p><p>Accedo al login que mencioné antes y accedo como admin</p><p><img src="images/120-4.png" alt="images/120-4.png" /></p><p></p><p>La versión 4.7.18 de pluck tiene una vuln de RCE <a href="https://www.exploit-db.com/exploits/51592">https://www.exploit-db.com/exploits/51592</a></p><p>La cual me permite subir un módulo en .zip para poder ejecutar una reverse shell</p><p><img src="images/120-5.png" alt="images/120-5.png" /></p><p></p><p>Por falta de archivos no me dejaba subir el reverse shell</p><p></p><p>Por lo que hice un git clone <code> git clone </code><code><a href="http://greenhorn.htb:3000/GreenAdmin/GreenHorn.git">http://greenhorn.htb:3000/GreenAdmin/GreenHorn.gi</a></code><a href="http://greenhorn.htb:3000/GreenAdmin/GreenHorn.git">t</a></p><p></p><p>Ahí seleccioné un módulo y modifiqué un archivo .php con el reverse shell .php de pentestmonkey</p><p></p><p>Obtengo una reverse shell</p><p><img src="images/120-6.png" alt="images/120-6.png" /></p><p></p><p>Upgrade de la shell</p><p><strong> python3 -c &#39;import pty; pty.spawn(&quot;/bin/bash&quot;)&#39;</strong></p><p></p><p>Estoy con el usuario www-data</p><p></p><p>No puedo acceder a la flag user.txt por que no tengo el usuario junior</p><p></p><p>Busco si tiene algún archivo</p><p>find / -type f -user junior 2&gt;/dev/null</p><p>find / -type f -user junior 2&gt;/dev/null</p><p></p><p>No encuentro nada interesante</p><p></p><p>Pruebo con la pass con la que entré al admin</p><p><img src="images/120-7.png" alt="images/120-7.png" /></p><p></p><p>Al pasarme el archivo veo que está oculto</p><p><img src="images/120-8.png" alt="images/120-8.png" /></p><p></p><p>Convertimos a imagen usando pdfimages</p><p> pdfimages &quot;./Using OpenVAS.pdf&quot; greenhorn</p><p> ls greenhorn-000.ppm </p><p> <img src="images/120-9.png" alt="images/120-9.png" /></p><p> Está pixelada por lo que usamos Depix </p><p>Depix es una tecnica para recuperar texto de una screenshot pixelada</p><p></p><p>python3 depix.py \</p><p><img src="images/120-10.png" alt="images/120-10.png" /></p><p>Hacemos cat a la root_pass</p><p></p><p>Obtenemos el user root</p><p><img src="images/120-11.png" alt="images/120-11.png" /></p></div>
</body>
</html>
