<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>OpenAdmin</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="../../assets/css/writeups_style.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>OpenAdmin</h1><br/><p>Portscan</p><p></p><p><img src="images/201-1.png" alt="images/201-1.png" /></p><p></p><p>Directory enumeration</p><p></p><p>	<strong>gobuster --wordlist=/usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt dir -u </strong><strong><a href="http://10.10.10.171/">http://10.10.10.171/</a></strong></p><p></p><p><img src="images/201-2.png" alt="images/201-2.png" /></p><p></p><p>On /music there is  a redirection to /ona/ directory</p><p></p><p><img src="images/201-3.png" alt="images/201-3.png" /></p><p></p><p>I have a version of OpenNetAdmin 18.1.1</p><p></p><p>With searchsploit i find that this version its vulnerable to RCE</p><p></p><p><img src="images/201-4.png" alt="images/201-4.png" /></p><p></p><p>I enter with www-data user</p><p></p><p><img src="images/201-5.png" alt="images/201-5.png" /></p><p></p><p>I will try to upgrade the shell for have </p><p></p><p>There is 2 users </p><p></p><p><img src="images/201-6.png" alt="images/201-6.png" /></p><p></p><p>I find the settings to the db</p><p></p><p><img src="images/201-7.png" alt="images/201-7.png" /></p><p></p><p><img src="images/201-8.png" alt="images/201-8.png" /></p><p></p><p>Using Password reuse i can enter with user jimmy throught SSH</p><p></p><p><img src="images/201-9.png" alt="images/201-9.png" /></p><p></p><p>Interesting active port </p><p></p><p><img src="images/201-10.png" alt="images/201-10.png" /></p><p></p><p>Lets go make a portforwarding of the port</p><p></p><p><img src="images/201-11.png" alt="images/201-11.png" /></p><p></p><p><img src="images/201-12.png" alt="images/201-12.png" /></p><p></p><p>On /var/www/internal i found a post request </p><p></p><p><img src="images/201-13.png" alt="images/201-13.png" /></p><p></p><p>This contains the username jimmy and a hash sha512</p><p></p><p><img src="images/201-14.png" alt="images/201-14.png" /></p><p></p><p>We login on with this cracked passwd and the username jimmy</p><p></p><p>And we obtain a Private Key  (So probably to joanna)</p><p></p><p><img src="images/201-15.png" alt="images/201-15.png" /></p><p></p><p><img src="images/201-16.png" alt="images/201-16.png" /></p><p></p><p>For ssh connection i have to send the password too, so i will crack the ssh key with ssh2john</p><p></p><p><img src="images/201-17.png" alt="images/201-17.png" /></p><p></p><p>This password is the passsphrase for the private key</p><p></p><p><img src="images/201-18.png" alt="images/201-18.png" /></p><p></p><p>With sudo -l i see that i can execute a command as a root</p><p></p><p><img src="images/201-19.png" alt="images/201-19.png" /></p><p></p><p>With nano as root we can read files and execute commands too</p><p></p><p><img src="images/201-20.png" alt="images/201-20.png" /></p><p></p><p>So i can read the root.txt flag</p><p></p></div>
</body>
</html>
